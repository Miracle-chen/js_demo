<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <script>
        // // var没有块级作用域，会创建全局变量，每次赋值都会改变全局变量
        // for (var i = 1; i <= 5; i++) {
        //     setTimeout(() => {
        //         console.log(i);    //  6 * 5
        //     }, 1000)
        // }

        // // let 块级作用域，会创建五个块级环境
        // for (let i = 1; i <= 5; i++) {
        //     setTimeout(() => {
        //         console.log(i);    //  1 - 5
        //     }, 1000)
        // }

        // // 返回一个函数，在外部定义变量接收这个函数。
        // // 闭包就是能够读取其他函数内部变量的函数,作为将函数内部和函数外部链接起来的桥梁
        // // 将变量保存在内存中，不会被垃圾回收机制(自动释放不在使用的变量等，释放内存)回收。
        // // 为防止内存泄漏(不在用到的内存，没有释放)(参考：http://www.ruanyifeng.com/blog/2017/04/memory-leak.html)，在退出函数之前，要将函数内的变量清除。
        // let hd = () => {
        //     let n = 1;
        //     return function add() {
        //         let m = 10;
        //         return function () {
        //             console.log('m', m++);
        //             console.log('n', ++n);
        //         }
        //     };
        // };

        // let a = hd()();
        // a();


        // // 闭包代码片段一
        // var name = "The Window";
        // var object = {
        //     name: "My Object",
        //     getNameFunc: function () {
        //         return function () {
        //             // 普通函数的this指向window,箭头函数的this指向父级this。此处this.name => window.name
        //             return this.name;
        //         };
        //     }
        // };
        // console.log(object.getNameFunc()());


        // // 闭包代码片段二
        // var name = "The Window";
        // var object = {
        //     name: "My Object",
        //     getNameFunc: function () {
        //         // 定义变量接收this，等同于箭头函数的效果。
        //         var that = this;
        //         return function () {
        //             return that.name;
        //         };
        //     }
        // };

        // console.log(object.getNameFunc()());

        // // 
        // function fun(n, o) {
        //     console.log(o);
        //     console.log(n);
        //     return {
        //         fun: function (m) {
        //             return fun(m, n);
        //         }
        //     };
        // }
        // var a = fun(0);
        // a.fun(1);
        // a.fun(2);
        // a.fun(3);

        // var b = fun(0).fun(1).fun(2).fun(3);

        // var c = fun(0).fun(1);
        // c.fun(2);
        // c.fun(3);


        // 
        // function f1() {
        //     var n = 999;
        //     nAdd = function () { n += 1 }
        //     function f2() {
        //         alert(n);
        //     }
        //     return f2;
        // }
        // var result = f1();
        // result(); // 999
        // nAdd();
        // result(); // 1000


    </script>
</body>

</html>